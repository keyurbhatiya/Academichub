{% extends 'core/base.html' %}
{% block title %}{{ project.title }} | Academic Projects{% endblock %}
{% block content %}
<main class="py-12 sm:py-16 bg-gray-50 text-gray-800">
    <div class="container mx-auto px-4 sm:px-6 max-w-4xl">

        <div class="mb-8 sm:mb-10 flex items-center justify-between flex-wrap">
            <div class="flex items-center mb-4 sm:mb-0">
                <a href="{% url 'projects' %}" class="inline-flex items-center text-green-600 hover:text-green-800 transition-colors duration-200">
                    <i class="fas fa-arrow-left mr-2"></i> Back to Projects
                </a>
            </div>
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 ml-4 text-center sm:text-left flex-grow">{{ project.title }}</h1>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 sm:p-8 border border-gray-100">
            <div class="mb-6 flex flex-wrap items-center justify-between text-sm text-gray-600 border-b pb-4">
                <div class="flex flex-wrap items-center">
                    <div class="flex items-center mr-6 mb-2">
                        <i class="fas fa-code text-gray-400 mr-2"></i>
                        <span class="font-medium">Language:</span>
                        <span class="ml-1">{{ project.language|default:"General" }}</span>
                    </div>
                    <div class="flex items-center mr-6 mb-2">
                        <i class="fas fa-user text-gray-400 mr-2"></i>
                        <span class="font-medium">Uploaded by:</span>
                        <span class="ml-1">{{ project.uploaded_by }}</span>
                    </div>
                    <div class="flex items-center mb-2">
                        <i class="fas fa-calendar-alt text-gray-400 mr-2"></i>
                        <span class="font-medium">Date:</span>
                        <span class="ml-1">{{ project.uploaded_at|date:"F j, Y" }}</span>
                    </div>
                </div>
                
                <button id="copy-url-btn" 
                        class="flex items-center px-4 py-2 bg-gray-100 hover:bg-green-100 rounded-lg transition-colors duration-200 text-gray-800 hover:text-green-800 font-semibold mt-4 sm:mt-0">
                    <i class="fas fa-copy mr-2"></i>
                    <span id="btn-text">Copy Project URL</span>
                </button>
            </div>

            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-3">Description</h2>
                <div class="prose max-w-none text-gray-700">
                    <p class="whitespace-pre-wrap">{{ project.description }}</p>
                </div>
            </div>

            <div class="mb-8 border-t pt-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Files & Links</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    {% if project.github_url %}
                    <a href="{{ project.github_url }}" target="_blank" rel="noopener noreferrer"
                       class="flex items-center justify-center p-4 bg-gray-100 hover:bg-green-100 rounded-lg transition-colors duration-200 text-gray-800 hover:text-green-800 font-semibold border-2 border-transparent hover:border-green-300">
                        <i class="fab fa-github text-2xl mr-3"></i>
                        <span>View on GitHub</span>
                    </a>
                    {% endif %}
                    {% if project.live_url %}
                    <a href="{{ project.live_url }}" target="_blank" rel="noopener noreferrer"
                       class="flex items-center justify-center p-4 bg-gray-100 hover:bg-green-100 rounded-lg transition-colors duration-200 text-gray-800 hover:text-green-800 font-semibold border-2 border-transparent hover:border-green-300">
                        <i class="fas fa-external-link-alt text-2xl mr-3"></i>
                        <span>Live Demo</span>
                    </a>
                    {% endif %}
                    {% if not project.github_url and not project.live_url %}
                    <p class="text-gray-500 italic col-span-2">No external links provided for this project.</p>
                    {% endif %}
                </div>
            </div>

            {% if project.tech_stack %}
            <div class="border-t pt-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-3">Technologies Used</h2>
                <div class="flex flex-wrap gap-2">
                    {% for tech in project.tech_stack %}
                    <span class="bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm font-medium">
                        {{ tech }}
                    </span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

        </div>
    </div>
</main>


<style>
/* Basic prose styling for the description */
.prose p {
    margin-bottom: 1em;
    line-height: 1.7;
}
.prose ul {
    list-style-type: disc;
    padding-left: 1.5em;
    margin-bottom: 1em;
}
.prose li {
    margin-bottom: 0.5em;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const copyButton = document.getElementById('copy-url-btn');
    const buttonText = document.getElementById('btn-text');

    copyButton.addEventListener('click', async () => {
        try {
            await navigator.clipboard.writeText(window.location.href);
            // Change button text and color to indicate success
            buttonText.textContent = 'URL Copied!';
            copyButton.classList.remove('bg-gray-100', 'hover:bg-green-100', 'text-gray-800', 'hover:text-green-800');
            copyButton.classList.add('bg-green-500', 'text-white');
            
            // Revert button text and color after a short delay
            setTimeout(() => {
                buttonText.textContent = 'Copy Project URL';
                copyButton.classList.remove('bg-green-500', 'text-white');
                copyButton.classList.add('bg-gray-100', 'hover:bg-green-100', 'text-gray-800', 'hover:text-green-800');
            }, 2000); // Reverts after 2 seconds
        } catch (err) {
            console.error('Failed to copy URL: ', err);
            // You could add an error message here for the user
            buttonText.textContent = 'Failed to Copy';
        }
    });
});
</script>

{% endblock %}